cmake_minimum_required (VERSION 2.6)
project (newuoa)
set (CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall -lm -O3 -g -fPIC")
set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -lm -O3 -g -std=c++11 -fPIC")
set (CMAKE_ARCHIVE_OUTPUT_DIRECTORY lib)
set (CMAKE_LIBRARY_OUTPUT_DIRECTORY lib)
set (CMAKE_RUNTIME_OUTPUT_DIRECTORY bin)
include_directories (include)
add_library (newuoa_static STATIC src/newuoa.cpp include/newuoa.h)
set_target_properties (newuoa_static PROPERTIES OUTPUT_NAME newuoa)
add_library (newuoa_shared SHARED src/newuoa.cpp include/newuoa.h)
set_target_properties (newuoa_shared PROPERTIES OUTPUT_NAME newuoa)
add_executable (example_function src/example_function.c include/newuoa.h)
target_link_libraries (example_function newuoa_static)
add_executable (example_closure src/example_closure.cpp include/newuoa.h)
target_link_libraries (example_closure newuoa_static)
install(TARGETS newuoa_static ARCHIVE DESTINATION lib)
install(TARGETS newuoa_shared LIBRARY DESTINATION lib)
install(FILES include/newuoa.h DESTINATION include)
